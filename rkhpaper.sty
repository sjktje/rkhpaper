% This file is copyright (c) 2010 Svante Kvarnström <sjk@ankeborg.nu>

\usepackage{float}
\usepackage{times}

\ProvidesPackage{rkhpaper}
\typeout{Using rkhpaper.sty (c) Svante Kvarnstrom <sjk@ankeborg.nu>}

% Define command for printing the RKH logo
\newcommand{\rkhlogo}{\includegraphics[width=12.46cm,height=2.7cm]{rkhlogo.pdf}}

% Define commands for setting subject, examinator, tutor, points, 
% level and course. 
\def\subject{\gdef\@rkh@subject}
\def\examinator{\gdef\@rkh@examinator}
\def\tutor{\gdef\@rkh@tutor}
\def\points{\gdef\@rkh@points}
\def\level{\gdef\@rkh@level}
\def\course{\gdef\@rkh@course}

% Define margins, et.c.
\setlength{\topskip}{0mm}
\setlength{\topmargin}{0mm}
\setlength{\headheight}{0mm}
\setlength{\headsep}{0mm}
\setlength{\hoffset}{-0.5in}
\setlength{\voffset}{-0.5in}

% Define a new float, leftcorner, where the author, tutor and examinator
% information will shown.
\newfloat{leftcorner}{b}

% Redefine \and so that coauthors line up neatly.
\def\and{%
    \\ 
    & }%

% Now redefine \maketitle so that it builds our cover page the way
% we want it to, including RKH logo et.c.
\let\@rkh@maketitle=\maketitle
\def\maketitle{%
  \let\footnotesize\small
  \let\footnoterule\relax
  \let \footnote \thanks
  \begin{flushleft}
  \rkhlogo \\ %Print out logo.
  \ifdefined\@rkh@subject
    \@rkh@subject\\
  \fi
  \ifdefined\@rkh@points
    \@rkh@points hp
    \ifdefined\@rkh@level
        \@rkh@level\\
    \else
        \\
    \fi
  \fi
  \ifdefined\@rkh@course
    \@rkh@course, 2010 \\
  \fi
  \end{flushleft}

  \begin{center}%
    {\LARGE \@title \par}%
    \vskip 3em%
      \vskip 1.5em%
    {\large \@date \par}%       
  \end{center}\par
  \begin{leftcorner}
    \begin{tabular}{ll}
    \ifdefined\@author
        Författare: & \@author\\
    \fi
    \ifdefined\@rkh@tutor
        Handledare: & \@rkh@tutor\\
    \fi
    \ifdefined\@rkh@examinator
        Examinator: & \@rkh@examinator\\
    \fi
    \end{tabular}
  \end{leftcorner}
  \@thanks
  \vfil\null
  \setcounter{footnote}{1}%
  \global\let\thanks\relax
  \global\let\maketitle\relax
  \global\let\@thanks\@empty
  \global\let\@author\@empty
  \global\let\@date\@empty
  \global\let\@title\@empty
  \global\let\title\relax
  \global\let\author\relax
  \global\let\date\relax
  \global\let\and\relax
  \@rkh@maketitle
}

